!function(){"use strict";const e=e=>JSON.parse(localStorage.getItem(e))||[];function t(){document.querySelectorAll(".product__counter").forEach((e=>{const t=e.querySelector(".product__count-minus"),n=e.querySelector(".product__count-plus");let o=e.querySelector(".product__counter-number"),c=o.textContent;n.addEventListener("click",(()=>{o.textContent=++c,r()})),t.addEventListener("click",(()=>{c>1&&(o.textContent=--c,r())}))}))}function r(){document.querySelectorAll(".product__single-variation").forEach((e=>{let t=e.querySelector(".product__price-price");t=+t.textContent;let r=e.nextElementSibling.querySelector(".product__counter-number");"1"==r.innerText&&(e.querySelector(".product__price").textContent=t);let n=parseFloat(r.innerText)*t;n=`${n.toFixed(2)}`,e.querySelector(".product__price").textContent=n}))}function n(){const n=document.querySelector(".total-price-el"),c=document.querySelector(".cart-wrapper-item");let l=e("card");if(!l||!l.length)return c.innerHTML='<h4 class="cart-wrapper-h4">КОРЗИНА ПУСТА</h4>',void(n.textContent="0 руб");let d=0,u="";l.forEach(((e,t)=>{let r=parseFloat(e.prodPrice);d+=r,n.innerText=`${d.toFixed(2)}руб.`,u+=`\n        <div class="cart-wrapper-content" data-index=${t}>\n                    <div class="cart-product-img">\n                        <img class="img-product-cart" src=${e.imgProduct} />\n                    </div>\n                    <div class="product-name">\n                        <h3 class="cart-product-name">${e.prodName}\n                        </h3>\n                        <div class="addition"></div>\n                            <div class="counter-cart-wrapper">\n                            <div class="total-price">${r.toFixed(2)} руб.</div>\n                        </div>\n                    </div>    \n                    <div class="close-button">\n                     <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43"\n                        viewBox="0 0 43 43" fill="none">\n                        <line x1="10.5176" y1="31.9363" x2="30.7566" y2="9.52154"\n                         stroke="#ec710c" stroke-width="2" />\n                         <line x1="31.6061" y1="32.2923" x2="11.0406" y2="10.1767"\n                        stroke="#ec710c" stroke-width="2" />\n                     </svg>\n                    </div>\n                </div> \n        `})),c.innerHTML=u;let i=document.querySelectorAll(".product__counter");i&&(i=[...i],i.forEach((e=>{e.addEventListener("click",t)}))),r(),document.querySelectorAll(".close-button").forEach((e=>{e.addEventListener("click",o)}))}function o(t){const r=t.target.closest(".cart-wrapper-content"),o=r.dataset.index,c=e("card");c.splice(o,1),localStorage.setItem("card",JSON.stringify(c)),r.textContent="",n(),function(){const t=e("card");document.querySelector(".header__basket-count").textContent=t.length}()}t(),document.querySelectorAll(".product__counter").forEach((t=>{const r=t.querySelector(".product__add-tocart");r.addEventListener("click",(t=>{r.innerHTML='Добавлено \n           <svg width="14" height="14" viewBox="0 0 14 14" fill="none">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.2071 6.29289C12.5976 6.68342 12.5976 7.31658 12.2071 7.70711L6.70711 13.2071C6.31658 13.5976 5.68342 13.5976 5.29289 13.2071L2.29289 10.2071C1.90237 9.81658 1.90237 9.18342 2.29289 8.79289C2.68342 8.40237 3.31658 8.40237 3.70711 8.79289L6 11.0858L10.7929 6.29289C11.1834 5.90237 11.8166 5.90237 12.2071 6.29289Z" fill="black"/>\n           </svg>',function(t){const r=t.target.closest(".product__card"),n={imgProduct:r.querySelector(".product__img").getAttribute("src"),prodName:r.querySelector(".product__title").textContent,prodPrice:r.querySelector(".product__price").textContent,prodCountEl:r.querySelector(".product__counter-number").textContent},o=e("card");var c,l;o.push(n),c="card",l=o,localStorage.setItem(c,JSON.stringify(l)),document.querySelector(".header__basket-count").textContent=o.length}(t),n()}))})),function(){const e=document.querySelector(".cart-modal"),t=document.querySelector(".cart-wrapper"),r=document.querySelector(".header__basket-wrap"),o=document.querySelector(".order-button");r.addEventListener("click",(r=>{n(),e.style.display="block",t.style.display="block",document.querySelectorAll(".product__add-tocart").forEach((e=>{e.textContent="В корзину"}))})),e.addEventListener("click",(t=>{t.stopPropagation(),t.target==e&&(e.style.display="none",o.innerHTML="оформить заказ",o.style.backgroundColor="#8eaf2b7d")}))}();const c=document.getElementById("form");c.addEventListener("submit",(function(e){e.preventDefault(e);const t=[];c.querySelector('[name="name"]'),c.querySelector('[name="phone"]'),c.querySelector('[name="adress"]'),document.querySelector(".total-price-el").textContent,c.querySelector('[name="payment"]:checked').value,t.forEach((e=>{const r={name:e.prodName,count:e.prodCountEl,size:e.productSize};t.push(r);let n="";e.additional.length&&(n=e.additional),t.push(n)})),function(){const e=document.querySelector(".lds-roller"),t=document.querySelector(".order-button");setTimeout((()=>{e.style.display="inline-block",setTimeout((()=>{e.style.display="none",t.innerHTML="заказ оформлен",t.style.backgroundColor="#fd9c00"}),4e3)}),500)}()}))}();